# is this config file disabled
# false for enabled
# true for disabled
disabled = false

# bind an address of this host
# empty for bind all addresses of this host
#
# bind IPv4 example: 192.168.2.100
#
# bind IPv6 example: 2409:8a20:42d:2f40:587a:4c47:72c0:ad8e
#
# bind IPv4 and IPv6 example: 192.168.2.100,2409:8a20:42d:2f40:587a:4c47:72c0:ad8e
#
# as any/all addresses, IPv4 is 0.0.0.0, IPv6 is ::
#
bind_addr =

# the tracker server port
port = 22122

# the address family of service, value list:
##  IPv4: IPv4 stack
##  IPv6: IPv6 stack
##  auto: auto detect by bind_addr, IPv4 first then IPv6 when bind_addr is empty
##  both: IPv4 and IPv6 dual stacks
#
# following parameter use_storage_id MUST set to true and
# id_type_in_filename MUST set to id when IPv6 enabled
#
# default value is auto
# since V6.11
address_family = auto

# the response IP address size, value list:
##  IPv6: IPv6 address size (46)
##  auto: auto detect by storage_ids.conf, set to IPv6 address size
##        when contains IPv6 address
# default value is auto
# since V6.15
response_ip_addr_size = auto

# connect timeout in seconds
# default value is 30
# Note: in the intranet network (LAN), 2 seconds is enough.
connect_timeout = 5

# network timeout in seconds for send and recv
# default value is 30
network_timeout = 60

# if io_uring send with zero copy when Linux kernel version >= 5.19
# set to true when the NIC support zero copy
# default value is true
use_send_zc = true


# the base path to store data and log files
base_path = /opt/fastdfs

# max concurrent connections this server support
# you should set this parameter larger, eg. 10240
# default value is 256
max_connections = 1024

# accept thread count
# default value is 1 which is recommended
# since V4.07
accept_threads = 1

# work thread count
# work threads to deal network io
# default value is 4
# since V2.00
work_threads = 4

# the min network buff size
# the value can follow unit such as KB and MB, for example: 1MB
# default value 8KB
min_buff_size = 8KB

# the max network buff size
# the value can follow unit such as KB and MB, etc. for example: 1MB
# default value 128KB
max_buff_size = 128KB

# the method for selecting group to upload files
# 0: round robin
# 1: specify group
# 2: load balance, select the max free space group to upload file
store_lookup = 2

# which group to upload file
# when store_lookup set to 1, must set store_group to the group name
store_group = group2

# which storage server to upload file
# 0: round robin (default)
# 1: the first server order by ip address
# 2: the first server order by priority (the minimal)
# Note: if use_trunk_file set to true, must set store_server to 1 or 2
store_server = 0

# which path (means disk or mount point) of the storage server to upload file
# 0: round robin
# 2: load balance, select the max free space path to upload file
store_path = 0

# which storage server to download file
# 0: round robin (default)
# 1: the source storage server which the current file uploaded to
download_server = 0

# reserved storage space for system or other applications.
# if the free(available) space of any stoarge server in
# a group <= reserved_storage_space, no file can be uploaded to this group.
# bytes unit can be one of follows:
### G or g for gigabyte(GB)
### M or m for megabyte(MB)
### K or k for kilobyte(KB)
### no unit for byte(B)
#
### XX.XX% as ratio such as: reserved_storage_space = 10%
#
# NOTE:
## the absolute reserved space is the sum of all store paths in the storage server
## the reserved space ratio is for each store path
reserved_storage_space = 20%

#standard log level as syslog, case insensitive, value list:
### emerg for emergency
### alert
### crit for critical
### error
### warn for warning
### notice
### info
### debug
log_level = info

#unix group name to run this program, 
#not set (empty) means run by the group of current user
run_by_group=

#unix username to run this program,
#not set (empty) means run by current user
run_by_user =

# allow_hosts can occur more than once, host can be hostname or ip address,
# "*" (only one asterisk) means match all ip addresses
# we can use CIDR ips like 192.168.5.64/26
# and also use range like these: 10.0.1.[0-254] and host[01-08,20-25].domain.com
# for example:
# allow_hosts=10.0.1.[1-15,20]
# allow_hosts=host[01-08,20-25].domain.com
# allow_hosts=192.168.5.64/26
allow_hosts = *

# check storage server alive interval seconds
check_active_interval = 120

# thread stack size, should >= 64KB
# the value can follow unit such as KB and MB, for example: 1MB
# default value is 256KB
thread_stack_size = 256KB

# auto adjust when the ip address of the storage server changed
# default value is true
storage_ip_changed_auto_adjust = true

# storage sync file max delay seconds
# default value is 86400 seconds (one day)
# since V2.00
storage_sync_file_max_delay = 86400

# the max time of storage sync a file
# default value is 300 seconds
# since V2.00
storage_sync_file_max_time = 300

# if use a trunk file to store several small files
# default value is false
# since V3.00
use_trunk_file = false 

# the min slot size, should <= 4KB
# default value is 256 bytes
# since V3.00
slot_min_size = 256

# the max slot size, should > slot_min_size
# store the upload file to trunk file when it's size + 24 <= this value
# default value is 16MB
# since V3.00
slot_max_size = 1MB

# the alignment size to allocate the trunk space
# default value is 0 (never align)
# since V6.05
# NOTE: the larger the alignment size, the less likely of disk
#       fragmentation, but the more space is wasted.
trunk_alloc_alignment_size = 256

# if merge contiguous free spaces of trunk file
# default value is false
# since V6.05
trunk_free_space_merge = true

# if delete / reclaim the unused trunk files
# default value is false
# since V6.05
delete_unused_trunk_files = false

# the trunk file size, should >= 4MB
# default value is 64MB
# since V3.00
trunk_file_size = 64MB

# if create trunk file advancely
# default value is false
# since V3.06
trunk_create_file_advance = false

# the time base to create trunk file
# the time format: HH:MM
# default value is 02:00
# since V3.06
trunk_create_file_time_base = 02:00

# the interval of create trunk file, unit: second
# default value is 86400 (every day)
# since V3.06
trunk_create_file_interval = 86400

# the threshold to create trunk file
# when the free trunk file size less than the threshold,
# will create he trunk files
# default value is 0
# since V3.06
trunk_create_file_space_threshold = 20G

# if check trunk space occupying when loading trunk free spaces
# the occupied spaces will be ignored
# default value is false
# since V3.09
# NOTICE: set this parameter to true will slow the loading of trunk spaces 
# when startup. you should set this parameter to true when neccessary.
trunk_init_check_occupying = false

# if ignore storage_trunk.dat, reload from trunk binlog
# default value is false
# since V3.10
# set to true once for version upgrade when your version less than V3.10
trunk_init_reload_from_binlog = false

# the min interval for compressing the trunk binlog file
# unit: second, 0 means never compress
# FastDFS compress the trunk binlog when trunk init and trunk destroy
# recommand to set this parameter to 86400 (every day)
# default value is 0
# since V5.01
trunk_compress_binlog_min_interval = 86400

# the interval for compressing the trunk binlog file
# unit: second, 0 means never compress
# recommand to set this parameter to 86400 (every day)
# default value is 0
# since V6.05
trunk_compress_binlog_interval = 86400

# compress the trunk binlog time base, time format: Hour:Minute
# Hour from 0 to 23, Minute from 0 to 59
# default value is 03:00
# since V6.05
trunk_compress_binlog_time_base = 03:00

# max backups for the trunk binlog file
# default value is 0 (never backup)
# since V6.05
trunk_binlog_max_backups = 7

# if use storage server ID instead of IP address
# if you want to use dual IPs for storage server, you MUST set
# this parameter to true, and configure the dual IPs in the file
# configured by following item "storage_ids_filename", such as storage_ids.conf
# default value is false
# since V4.00
use_storage_id = false

# specify storage ids filename, can use relative or absolute path
# this parameter is valid only when use_storage_id set to true
# since V4.00
storage_ids_filename = storage_ids.conf

# id type of the storage server in the filename, values are:
## ip: the ip address of the storage server
## id: the server id of the storage server
# this paramter is valid only when use_storage_id set to true
# default value is ip
# since V4.03
id_type_in_filename = id

# if trust the storage server ID sent by the storage server
# this paramter is valid only when use_storage_id set to true
# default value is true
# since V6.11
trust_storage_server_id = true


# if store slave file use symbol link
# default value is false
# since V4.01
store_slave_file_use_link = false

# if use connection pool
# default value is false
# since V4.05
use_connection_pool = true

# connections whose the idle time exceeds this time will be closed
# unit: second
# default value is 3600
# since V4.05
connection_pool_max_idle_time = 3600


# NOTE: following global parameters for error log
# which can be overwritten in [error-log] sections
# since V6.14

# sync log buff to disk every interval seconds
# default value is 1 seconds
sync_log_buff_interval = 1

# if rotate the log file every day
# set to true for rotate the log file anyway at the rotate time
# default value is true
log_file_rotate_everyday = true

# the time to rotate the log file, format is Hour:Minute
# Hour from 0 to 23, Minute from 0 to 59
# valid only when log_file_rotate_everyday is true
# default value is 00:00
log_file_rotate_time = 00:00

# if compress the old log file by gzip
# default value is false
log_file_compress_old = false

# compress the log file days before
# default value is 1
log_file_compress_days_before = 7

# rotate the log file when the log file exceeds this size
# 0 means never rotates log file by log file size
# the value can follow unit such as KB, MB and GB. for example: 100MB
# default value is 0
log_file_rotate_on_size = 0

# keep days of the log files
# 0 means do not delete the old log files
# default value is 15
log_file_keep_days = 15

# the time to delete the old log files, format is Hour:Minute
# Hour from 0 to 23, Minute from 0 to 59
# valid only when log_file_keep_days > 0
# default value is 01:30
log_file_delete_old_time = 01:30


[error-log]
# the error log filename is trackerd.log
# global log parameters can be overwritten here for error log

